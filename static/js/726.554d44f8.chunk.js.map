{"version":3,"file":"static/js/726.554d44f8.chunk.js","mappings":"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","sources":["validations/Comment.Validation.js","components/PostDetails.jsx"],"sourcesContent":["import * as Yup from \"yup\";\r\n\r\nconst CommentValidation = Yup.object({\r\n  comment: Yup.string().required(\"Comment is required\"),\r\n});\r\n\r\nexport default CommentValidation;\r\n","import {\r\n  collection,\r\n  deleteDoc,\r\n  doc,\r\n  onSnapshot,\r\n  orderBy,\r\n  query,\r\n  serverTimestamp,\r\n  setDoc,\r\n} from \"firebase/firestore\";\r\nimport { Field, Form, Formik } from \"formik\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { AuthContext, MediumContext } from \"../context/Context\";\r\nimport { db } from \"../Firebase\";\r\nimport CommentValidation from \"../validations/Comment.Validation\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nconst PostDetails = () => {\r\n  const { articles } = useContext(MediumContext);\r\n  const { authData } = useContext(AuthContext);\r\n\r\n  const articleId = useParams();\r\n\r\n  const [comments, setComments] = useState([]);\r\n\r\n  const toastConfig = {\r\n    position: \"top-right\",\r\n    autoClose: 2000,\r\n    hideProgressBar: true,\r\n    closeOnClick: true,\r\n    pauseOnHover: false,\r\n    draggable: false,\r\n    progress: undefined,\r\n  };\r\n\r\n  const listenArticle = (articleTitle, articleSubTitle) => {\r\n    const speechInstanceTitle = new SpeechSynthesisUtterance(\r\n      `${articleTitle}${\" \"}${articleSubTitle}`\r\n    );\r\n    speechInstanceTitle.pitch = 1;\r\n    speechInstanceTitle.rate = 0.8;\r\n    window.speechSynthesis.speak(speechInstanceTitle);\r\n  };\r\n\r\n  const filterArticle =\r\n    articles && articles.filter((article) => articleId.id === article.id);\r\n\r\n  // console.log(filterArticle);\r\n\r\n  const newDate =\r\n    filterArticle[0] &&\r\n    new Date(filterArticle[0]?.data.date.seconds * 1000).toLocaleString(\r\n      \"en-US\",\r\n      {\r\n        day: \"numeric\",\r\n        month: \"short\",\r\n      }\r\n    );\r\n\r\n  const getComments = async () => {\r\n    // console.log(articleId.id);\r\n    await onSnapshot(\r\n      query(\r\n        collection(db, `articles/${articleId.id}/comments`),\r\n        orderBy(\"date\", \"desc\")\r\n      ),\r\n      (snapshot) => {\r\n        setComments(\r\n          snapshot.docs.map((doc) => {\r\n            return { id: doc.id, commentsArray: doc.data() };\r\n          })\r\n        );\r\n        // console.log(snapshot.docs.map((doc) => doc.data()));\r\n      }\r\n    );\r\n  };\r\n\r\n  const newComment = doc(collection(db, `articles/${articleId.id}/comments`));\r\n\r\n  const handleCommentSubmit = async (values, resetForm) => {\r\n    // console.log(values);\r\n    await setDoc(newComment, {\r\n      ...values,\r\n      image: authData.isAnonymous ? \"\" : authData.photoURL,\r\n      name: authData.isAnonymous\r\n        ? `Anonymous${authData.uid.slice(0, 4)}`\r\n        : authData.displayName,\r\n      date: serverTimestamp(),\r\n    });\r\n    toast.success(\"Commented\", toastConfig);\r\n    resetForm();\r\n  };\r\n\r\n  const deleteComment = async (commentId) => {\r\n    // console.log(commentId);\r\n    await deleteDoc(doc(db, `articles/${articleId.id}/comments/${commentId}`));\r\n  };\r\n\r\n  useEffect(() => {\r\n    getComments();\r\n    window.scrollTo(0, 0);\r\n    return () => {};\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {filterArticle.length > 0 ? (\r\n        <div className=\"w-full max-w-[50rem] mx-auto px-6 py-10 mt-20\">\r\n          <div className=\"flex space-x-4 items-center w-full\">\r\n            <figure className=\"w-12 h-12 rounded-full overflow-hidden\">\r\n              <img src={filterArticle[0]?.data.author_image} alt=\"\" />\r\n            </figure>\r\n            <div className=\"flex-grow\">\r\n              <p className=\"text-xl font-medium\">\r\n                {filterArticle[0]?.data.author}\r\n              </p>\r\n              <div className=\"flex justify-between items-center mt-1\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <p className=\"text-sm text-gray-500\">{newDate}</p>\r\n                  <div className=\"bg-gray-200 text-gray-600 text-xs font-semibold px-3 py-0.5 rounded-full\">\r\n                    <p>{filterArticle[0]?.data.category}</p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={() => {\r\n                    listenArticle(\r\n                      filterArticle[0]?.data.title,\r\n                      filterArticle[0]?.data.sub_title\r\n                    );\r\n                  }}\r\n                >\r\n                  listen\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"mt-6\">\r\n            <h4 className=\"text-2xl sm:text-3xl font-serif capitalize text-gray-700\">\r\n              {filterArticle[0]?.data.title}\r\n            </h4>\r\n            <p className=\"text-gray-500 text-lg sm:text-xl mt-2\">\r\n              {filterArticle[0]?.data.sub_title}\r\n            </p>\r\n          </div>\r\n          <figure className=\"w-full max-w-[50rem] my-8\">\r\n            <img\r\n              className=\"w-full h-full\"\r\n              src={filterArticle[0]?.data.post_image}\r\n              alt=\"\"\r\n              loading=\"lazy\"\r\n            />\r\n          </figure>\r\n          <div className=\"space-y-5\">\r\n            {filterArticle[0]?.data.content &&\r\n              filterArticle[0]?.data.content.map((dataContent) => {\r\n                return (\r\n                  <p\r\n                    key={Math.random()}\r\n                    className={`text-base leading-8 ${dataContent.style} ${\r\n                      dataContent.style === \"italic\" &&\r\n                      \"border-l-2 border-gray-400 pl-4\"\r\n                    }`}\r\n                  >\r\n                    {dataContent.contentText}\r\n                  </p>\r\n                );\r\n              })}\r\n          </div>\r\n          <div className=\"mt-5\">\r\n            <h4 className=\"text-2xl font-semibold mb-5\">Comments</h4>\r\n            {authData !== null && (\r\n              <Formik\r\n                initialValues={{ comment: \"\" }}\r\n                validationSchema={CommentValidation}\r\n                onSubmit={(values, { resetForm }) => {\r\n                  handleCommentSubmit(values, resetForm);\r\n                }}\r\n              >\r\n                {({ errors }) => {\r\n                  return (\r\n                    <Form className=\"mb-5\" autoComplete=\"off\">\r\n                      <div className=\"flex items-center space-x-3\">\r\n                        <Field\r\n                          className=\"border-b-2 border-gray-400 focus:outline-none px-2 pb-2 w-full\"\r\n                          type=\"text\"\r\n                          name=\"comment\"\r\n                          id=\"\"\r\n                          placeholder=\"Comment\"\r\n                        />\r\n                        <button\r\n                          className=\"bg-black text-white rounded-3xl text-lg font-semibold px-6 py-2 bg-opacity-90 hover:bg-opacity-100\"\r\n                          type=\"submit\"\r\n                        >\r\n                          Post\r\n                        </button>\r\n                      </div>\r\n                      <p className=\"text-sm text-red-600 font-semibold\">\r\n                        {errors.comment}\r\n                      </p>\r\n                    </Form>\r\n                  );\r\n                }}\r\n              </Formik>\r\n            )}\r\n            {comments.length === 0 && (\r\n              <p className=\"font-semibold text-2xl\">No comments yet...</p>\r\n            )}\r\n            {comments &&\r\n              comments.map((comment) => {\r\n                return (\r\n                  <div\r\n                    key={Math.random()}\r\n                    className=\"flex justify-between items-start space-x-3 mt-5\"\r\n                  >\r\n                    <div className=\"flex items-start space-x-3\">\r\n                      {comment.commentsArray.image !== \"\" && (\r\n                        <figure className=\"w-6 h-6 rounded-full overflow-hidden bg-gray-300 flex justify-center items-center\">\r\n                          <img src={comment.commentsArray.image} alt=\"\" />\r\n                        </figure>\r\n                      )}\r\n                      {comment.commentsArray.image === \"\" && (\r\n                        <p className=\"w-6 h-6 rounded-full overflow-hidden bg-gray-300 flex justify-center items-center\">\r\n                          A\r\n                        </p>\r\n                      )}\r\n                      <div>\r\n                        <h6 className=\"font-semibold\">\r\n                          {comment.commentsArray.name}\r\n                        </h6>\r\n                        <p>{comment.commentsArray.comment}</p>\r\n                      </div>\r\n                    </div>\r\n                    {authData !== null &&\r\n                      authData.displayName ===\r\n                        filterArticle[0]?.data.author && (\r\n                        <button\r\n                          onClick={() => {\r\n                            deleteComment(comment.id);\r\n                          }}\r\n                        >\r\n                          <svg\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                            fill=\"none\"\r\n                            viewBox=\"0 0 24 24\"\r\n                            strokeWidth=\"1.5\"\r\n                            stroke=\"currentColor\"\r\n                            className=\"w-4 sm:w-5 text-red-600\"\r\n                          >\r\n                            <path\r\n                              strokeLinecap=\"round\"\r\n                              strokeLinejoin=\"round\"\r\n                              d=\"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0\"\r\n                            />\r\n                          </svg>\r\n                        </button>\r\n                      )}\r\n                  </div>\r\n                );\r\n              })}\r\n          </div>\r\n          <ToastContainer />\r\n        </div>\r\n      ) : (\r\n        <div className=\"w-full max-w-[50rem] mx-auto px-6 py-10 mt-20\">\r\n          <p>Loading...</p>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\nexport default PostDetails;\r\n"],"names":["Yup","comment","required","articles","useContext","MediumContext","authData","AuthContext","articleId","useParams","useState","comments","setComments","toastConfig","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","filterArticle","filter","article","id","newDate","Date","data","date","seconds","toLocaleString","day","month","getComments","onSnapshot","query","collection","db","orderBy","snapshot","docs","map","doc","commentsArray","newComment","handleCommentSubmit","values","resetForm","setDoc","image","isAnonymous","photoURL","name","uid","slice","displayName","serverTimestamp","toast","deleteComment","commentId","deleteDoc","useEffect","window","scrollTo","length","className","src","author_image","alt","author","category","onClick","articleTitle","articleSubTitle","speechInstanceTitle","SpeechSynthesisUtterance","pitch","rate","speechSynthesis","speak","listenArticle","title","sub_title","post_image","loading","content","dataContent","style","contentText","Math","random","initialValues","validationSchema","CommentValidation","onSubmit","errors","autoComplete","type","placeholder","xmlns","fill","viewBox","strokeWidth","stroke","strokeLinecap","strokeLinejoin","d"],"sourceRoot":""}